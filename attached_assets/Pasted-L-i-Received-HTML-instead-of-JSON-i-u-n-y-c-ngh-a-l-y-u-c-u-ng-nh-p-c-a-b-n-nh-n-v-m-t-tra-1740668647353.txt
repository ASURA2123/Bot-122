Lá»—i "Received HTML instead of JSON":

Äiá»u nÃ y cÃ³ nghÄ©a lÃ  yÃªu cáº§u Ä‘Äƒng nháº­p cá»§a báº¡n nháº­n vá» má»™t trang HTML thay vÃ¬ JSON.
NguyÃªn nhÃ¢n cÃ³ thá»ƒ do Facebook yÃªu cáº§u xÃ¡c minh CAPTCHA, thÃ´ng tin xÃ¡c thá»±c khÃ´ng há»£p lá»‡, hoáº·c User-Agent cá»§a yÃªu cáº§u khÃ´ng Ä‘Ãºng.
Lá»—i ErrorHandler.getErrorDetails is not a function:

Äiá»u nÃ y cÃ³ thá»ƒ do ErrorHandler khÃ´ng xuáº¥t Ä‘Ãºng phÆ°Æ¡ng thá»©c getErrorDetails, hoáº·c cÃ³ thá»ƒ báº¡n Ä‘ang gá»i sai cÃ¡ch.
ğŸ” CÃ¡ch kháº¯c phá»¥c lá»—i Ä‘Äƒng nháº­p
1ï¸âƒ£ Kiá»ƒm tra pháº£n há»“i tá»« Facebook
Báº¡n cÃ³ thá»ƒ in ra ná»™i dung pháº£n há»“i Ä‘á»ƒ xem Facebook tráº£ vá» lá»—i gÃ¬:

typescript
Copy
Edit
try {
    const response = await loginRequest(); // Gá»i API Ä‘Äƒng nháº­p

    if (response.headers['content-type']?.includes('application/json')) {
        console.log("ÄÄƒng nháº­p thÃ nh cÃ´ng:", response.data);
    } else {
        console.error("Unexpected response:", response.data); // Log toÃ n bá»™ HTML
        throw new Error("Received HTML instead of JSON. Login might require manual verification.");
    }
} catch (error) {
    console.error("Login failed:", error);
}
âœ… Náº¿u nháº­n Ä‘Æ°á»£c trang HTML, hÃ£y thá»­ Ä‘Äƒng nháº­p vÃ o Facebook trÃªn trÃ¬nh duyá»‡t vÃ  kiá»ƒm tra xem cÃ³ yÃªu cáº§u xÃ¡c minh nÃ o khÃ´ng.

2ï¸âƒ£ Äáº£m báº£o ErrorHandler xuáº¥t Ä‘Ãºng phÆ°Æ¡ng thá»©c getErrorDetails
Kiá»ƒm tra láº¡i trong src/utils/error-handler.ts:

typescript
Copy
Edit
export class ErrorHandler {
    static getErrorDetails(error: Error): string {
        return error.message; // Hoáº·c xá»­ lÃ½ lá»—i chi tiáº¿t hÆ¡n
    }
}
VÃ  trong test-login.ts, gá»i nhÆ° sau:

typescript
Copy
Edit
import { ErrorHandler } from '../utils/error-handler';

const handledError = ErrorHandler.getErrorDetails(error instanceof Error ? error : new Error(String(error)));
console.error("Login Error:", handledError);
âœ… Náº¿u váº«n lá»—i, thá»­ console.log(ErrorHandler) Ä‘á»ƒ kiá»ƒm tra xem module cÃ³ xuáº¥t Ä‘Ãºng khÃ´ng.

ğŸ›  CÃ¡c biá»‡n phÃ¡p khÃ¡c
âœ” Kiá»ƒm tra User-Agent trong yÃªu cáº§u Ä‘Äƒng nháº­p:
Facebook cÃ³ thá»ƒ cháº·n náº¿u yÃªu cáº§u khÃ´ng cÃ³ User-Agent há»£p lá»‡. HÃ£y thÃªm vÃ o header cá»§a request:

typescript
Copy
Edit
const headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.0.0 Safari/537.36'
};
âœ” Thá»­ Ä‘Äƒng nháº­p thá»§ cÃ´ng trÃªn trÃ¬nh duyá»‡t
Náº¿u Facebook yÃªu cáº§u xÃ¡c minh (captcha, email, sá»‘ Ä‘iá»‡n thoáº¡i), báº¡n cáº§n hoÃ n thÃ nh trÆ°á»›c khi bot cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng.

âœ” Kiá»ƒm tra AppState.json
Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng appstate.json Ä‘á»ƒ Ä‘Äƒng nháº­p, hÃ£y Ä‘áº£m báº£o file cÃ²n há»£p lá»‡. Náº¿u háº¿t háº¡n, cáº§n Ä‘Äƒng nháº­p láº¡i Ä‘á»ƒ láº¥y file má»›i.

